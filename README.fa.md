<p align="right">
  <a href="README.md">🇬🇧 English</a> 
</p>
# DNS Switcher (Windows) – اپ پرتابل Tkinter

![Python](https://img.shields.io/badge/Python-3.10%2B-blue)
![Platform](https://img.shields.io/badge/Platform-Windows-2ea44f)
![License: MIT](https://img.shields.io/badge/License-MIT-yellow)

یک اپ سبک و پرتابل برای ویندوز (Tkinter) که به شما اجازه می‌دهد DNS سیستم را سریع عوض کنید. پروفایل‌های آماده (Cloudflare، Google، Quad9، OpenDNS) دارد و می‌توانید با فایل محلی `dns_profiles.json` پروفایل‌های دلخواه‌تان را اضافه کنید. امکان اعمال روی همه آداپتورهای فعال یا آداپتورهای انتخابی وجود دارد و با یک کلیک می‌توانید به حالت پیش‌فرض (DHCP) برگردید.

> برای اعمال تغییرات DNS نیاز به دسترسی Administrator دارید.

---

## 📦 ویژگی‌ها
- چند پروفایل DNS (IPv4/IPv6) — قابل تنظیم با `dns_profiles.json`
- اعمال روی **تمام** آداپتورهای فعال یا آداپتورهای انتخابی
- دکمه **بازگردانی به حالت پیش‌فرض (DHCP)**
- بدون وابستگی اضافه (استفاده از PowerShell و netsh داخلی ویندوز)
- بیلد پرتابل با PyInstaller (`--onefile`) — فقط کپی و اجرا
- ارتقای دسترسی (UAC) فقط هنگام نیاز

---

## 🚀 شروع سریع
1. **دانلود** آخرین نسخه از صفحه Releases *(یا لوکال بیلد کنید؛ پایین‌تر توضیح داده شده)*
2. *(اختیاری)* فایل `dns_profiles.json` را کنار فایل `.exe` قرار دهید
3. برنامه را اجرا کنید؛ اگر با ادمین بالا نیامده، می‌تواند در صورت نیاز با دسترسی ادمین مجدد اجرا شود

> **نکته:** بعد از تعویض DNS، بهتر است کش DNS را خالی کنید:
```bat
ipconfig /flushdns
```

---

## 🛠 بیلد از سورس (Windows)
```powershell
# (اختیاری) ساخت و فعال‌سازی محیط مجازی
py -m venv .venv
.\.venv\Scripts\Activate.ps1
python -m pip install --upgrade pip

# ساخت فایل اجرایی پرتابل
pip install pyinstaller
py -m PyInstaller --noconsole --onefile dns_switcher.py
# خروجی: dist/dns_switcher.exe

# (اختیاری) درخواست ادمین از لحظه اجرا
# py -m PyInstaller --noconsole --onefile --uac-admin dns_switcher.py
```

---

## 📁 ساختار مخزن
```
.
├─ dns_switcher.py              # اپ اصلی (رابط Tkinter)
├─ README.md                    # این فایل
├─ LICENSE                      # مجوز MIT
├─ dns_profiles.json            # (اختیاری) پروفایل‌های سفارشی شما
└─ .github/
   └─ workflows/
      └─ build.yml             # GitHub Actions برای بیلد ویندوز + آرتیفکت
```

---

## ⚙️ فایل `dns_profiles.json` (اختیاری)
این فایل را کنار `.exe` یا `dns_switcher.py` بسازید تا پروفایل‌ها را اضافه/بازنویسی کنید:
```json
{
  "MyOffice": { "ipv4": ["10.0.0.53", "10.0.0.54"], "ipv6": [] },
  "Shecan":   { "ipv4": ["178.22.122.100", "185.51.200.2"], "ipv6": [] }
}
```
- کلیدها همان نام پروفایل در UI هستند
- آرایه‌های `ipv4` و `ipv6` اختیاری‌اند؛ می‌توانید یکی یا هر دو را بدهید
- پروفایل‌های کاربر با همان نام، پروفایل‌های پیش‌فرض را بازنویسی می‌کنند

---

## 🔐 دسترسی و نکات
- اعمال DNS نیاز به **Administrator** دارد
- روی سیستم‌های سازمانی ممکن است **Group Policy** تغییرات را مسدود یا برگرداند
- برنامه تنها از PowerShell و `netsh` محلی برای تنظیم DNS استفاده می‌کند
- برای IPv6، PowerShell هر دو خانواده را مدیریت می‌کند؛ fallback `netsh` اعمال نشده است

---

## ❓ عیب‌یابی
- **خطای دسترسی/ارتقا:** برنامه را با ادمین اجرا کنید یا از دکمه داخل برنامه برای اجرای مجدد با ادمین استفاده کنید
- **عدم نمایش آداپتور:** مطمئن شوید آداپتورها *Up* هستند و مجازی صرف نیستند؛ دکمه **به‌روزرسانی** را بزنید
- **برنگشتن/اعمال نشدن تغییرات:** ممکن است GPO شرکت، VPN یا آنتی‌ویروس DNS را بازنویسی کند
- **پس از تغییر:** `ipconfig /flushdns` را اجرا کنید

---

## 🤝 مشارکت
پول‌ریکوئست‌ها خوش‌آمدند! برای تغییرات بزرگ، اول یک Issue باز کنید.

- UI ساده و بدون وابستگی اضافی نگه‌داشته شود
- برای بخش‌های منطقی (مثل پارس آداپتورها) Helperهای قابل تست در نظر بگیرید

---

## 📝 مجوز
تحت مجوز MIT منتشر می‌شود. فایل `LICENSE` را ببینید.

---

## 🖼️ اسکرین‌شات

![رابط برنامه DNS Switcher](docs/screenshot-ui.png)
